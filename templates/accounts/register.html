{% extends 'accounts/base.html' %}
{% block title %}Registro{% endblock %}
{% block content %}
<h1>Registro</h1>
{% if last_creds %}
<p><strong>Usuario asignado:</strong> {{ last_creds.username }}<br>
<strong>Contraseña temporal:</strong> {{ last_creds.password }}</p>
{% if last_creds.totp %}
<div style="background:#eef;padding:10px;border-left:4px solid #55f;margin:10px 0;">
  <p><strong>Enrolar TOTP:</strong></p>
  <p>Escanea esta URL en Google Authenticator / Authy (o copia el enlace en un generador TOTP):</p>
  <p style="word-break: break-all;">{{ last_creds.totp.otpauth_url }}</p>
  <p>Luego inicia sesión y usa el código de 6 dígitos generado por la app.</p>
  <p>Nota: Para pruebas, la cuenta se activó automáticamente.</p>
  </div>
{% endif %}
{% endif %}
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Crear</button>
    <p>Se enviará un código de activación a tu correo y/o celular.</p>
    <p>Tras activar, un admin puede habilitar la cuenta o puedes usar desbloqueo.</p>
</form>
{% endblock %}


